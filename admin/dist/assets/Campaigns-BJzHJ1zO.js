import{m as d,j as a,L as m,r as c,n as u,s as x}from"./index-vvvWIYqA.js";import{u as p,l as o}from"./Layout-BwEjGXl_.js";import{S as g}from"./Subtitle-1WpuQ5SU.js";function f({url:s,title:i,link:r}){const l=d(),n=e=>{l(`/app/campaigns/${e}`)};return a.jsx("div",{className:"card w-full p-4 shadow-xl",children:a.jsxs(m,{to:`/app/campaigns/${r}`,children:[a.jsx(g,{children:i}),a.jsx("div",{className:"divider mt-2"}),a.jsx("img",{src:s,className:"w-full"}),a.jsx("button",{className:"btn btn-primary w-full mt-4",onClick:()=>n(r),children:"Edit"})," "]})})}function j(){return d(),a.jsx("div",{className:"card w-full p-4 shadow-xl",children:a.jsxs(m,{to:"/app/campaign/new",children:[a.jsx(g,{children:"Create New Campaign"}),a.jsx("div",{className:"divider mt-2"})," ",a.jsx("img",{alt:"add",src:"/public/assets/icons/plus.svg",className:"w-full"})]})})}function h({children:s}){return a.jsx("p",{className:"text-2xl font-bold",children:s})}function N(){p();const s=localStorage.getItem("token"),[i,r]=c.useState(),[l,n]=c.useState(!1);return c.useEffect(()=>{(async()=>{try{if(s){n(!0);const t=await u.get("http://localhost:5000/admin/get-all-campaigns",{headers:{Authorization:`Bearer ${s}`}});r(t.data.campaigns)}}catch(t){if(console.log(t),t.response&&t.response.status===401)return navigate("/");o.NotificationManager.error("Failed to fetch campaigns","Error",5e3,()=>{alert(t.response.data.error)})}finally{n(!1)}})()},[s]),a.jsxs(a.Fragment,{children:[a.jsx(o.NotificationContainer,{}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:a.jsx(j,{})}),a.jsx("br",{})," ",a.jsx("br",{}),a.jsx("br",{}),a.jsx(h,{children:"Existing Campaigns"}),a.jsx("br",{}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:i&&i.length>0&&i.map((e,t)=>a.jsx(f,{title:e.title,url:e.thumbnail,link:e.id},t))})]})}function w(){const s=p();return c.useEffect(()=>{s(x({title:"Campaigns"}))},[]),a.jsx(N,{})}export{w as default};
