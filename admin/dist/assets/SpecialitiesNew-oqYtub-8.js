import{m as h,r as s,j as e,n as j,s as v}from"./index-vvvWIYqA.js";import"./quill.snow-CiPkw5_t.js";import{I as m}from"./InputText-yA2u88Bt.js";import{E as y}from"./ErrorText-DG8RsJKJ.js";import{l as r,u as N}from"./Layout-BwEjGXl_.js";function b(){const n=h(),[a,c]=s.useState({title:"",desc:"",icon:null,iconPreview:"",wallpaperimg:null,wallpaperimgPreview:""}),[d,u]=s.useState(!1),[f,o]=s.useState(""),p=({updateType:l,value:t})=>{c({...a,[l]:t})},g=l=>{const t=l.target.files[0];c(i=>({...i,icon:t,iconPreview:URL.createObjectURL(t)}))},x=l=>{const t=l.target.files[0];c(i=>({...i,wallpaperimg:t,wallpaperimgPreview:URL.createObjectURL(t)}))},w=async l=>{if(l.preventDefault(),o(""),!a.title||!a.desc||!a.icon||!a.wallpaperimg){o("All fields are required."),r.NotificationManager.error("Error","All fields are required.");return}const t=new FormData;t.append("title",a.title),t.append("desc",a.desc),a.icon&&t.append("icon",a.icon),a.wallpaperimg&&t.append("wallpaperimg",a.wallpaperimg);try{const i=await j.post("http://localhost:5000/admin/speciality-new",t,{headers:{"Content-Type":"multipart/form-data"}});r.NotificationManager.success("Success","Created new Specialty Successfully"),n("/app/specialities")}catch(i){o(i.response.data.error),r.NotificationManager.error("Error","Failed to create new Specialty",5e3,()=>{alert(i.response.data.error)})}finally{u(!1)}};return s.useEffect(()=>{console.log(a)},[a]),e.jsxs(e.Fragment,{children:[e.jsx(r.NotificationContainer,{}),e.jsxs("div",{className:"w-full flex flex-col gap-8",children:[e.jsx(m,{type:"text",defaultValue:a.title,updateType:"title",containerStyle:"mt-4",labelTitle:"Enter Specialty Title",updateFormValue:p}),e.jsx(m,{type:"text",defaultValue:a.desc,updateType:"desc",labelTitle:"Enter Description",updateFormValue:p}),e.jsxs("div",{className:"form-control flex flex-col gap-2",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Upload icon"})})," ",e.jsx("input",{type:"file",accept:"image/*,image/svg+xml",onChange:g,className:"input input-bordered w-full"}),a.iconPreview&&e.jsx("div",{children:e.jsx("img",{src:a.iconPreview,alt:"Icon Preview",className:"w-1/5 h-auto mt-4"})})]}),e.jsxs("div",{className:"form-control flex flex-col gap-2",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Upload Wallpaper Image"})})," ",e.jsx("input",{type:"file",accept:"image/*,image/svg+xml",onChange:x,className:"input input-bordered w-full"}),a.wallpaperimgPreview&&e.jsx("div",{children:e.jsx("img",{src:a.wallpaperimgPreview,alt:"WallPaper Image Preview",className:"w-1/5 h-auto mt-4"})})]}),e.jsx(y,{styleClass:"mt-8",children:f}),e.jsx("button",{type:"submit",onClick:w,className:"btn mt-2 w-full btn-primary"+(d?" loading":""),children:"Create New!"})]})]})}function D(){const n=N();return s.useEffect(()=>{n(v({title:"Add New Speciality"}))},[]),e.jsx(b,{})}export{D as default};
