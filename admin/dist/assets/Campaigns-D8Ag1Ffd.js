import{o as d,j as a,L as m,r as l,l as u,s as x}from"./index-Bf73z5r4.js";import{u as g,l as o}from"./Layout-HwrZM4zP.js";import{S as p}from"./Subtitle-7zIYQHEd.js";function f({url:s,title:e,link:n}){const c=d(),r=i=>{c(`/app/campaigns/${i}`)};return a.jsx("div",{className:"card w-full p-4 shadow-xl",children:a.jsxs(m,{to:`/app/campaigns/${n}`,children:[a.jsx(p,{children:e}),a.jsx("div",{className:"divider mt-2"}),a.jsx("img",{src:s,className:"w-full"}),a.jsx("button",{className:"btn btn-primary w-full mt-4",onClick:()=>r(n),children:"Edit"})," "]})})}function h(){return d(),a.jsx("div",{className:"card w-full p-4 shadow-xl",children:a.jsxs(m,{to:"/app/campaign/new",children:[a.jsx(p,{children:"Create New Campaign"}),a.jsx("div",{className:"divider mt-2"})," ",a.jsx("img",{alt:"add",src:"/public/assets/icons/plus.svg",className:"w-full"})]})})}function j({children:s}){return a.jsx("p",{className:"text-2xl font-bold",children:s})}function N(){g();const s=localStorage.getItem("token"),[e,n]=l.useState(),[c,r]=l.useState(!1);return l.useEffect(()=>{(async()=>{try{if(s){r(!0);const t=await u.get("http://localhost:5000/admin/get-all-campaigns",{headers:{Authorization:`Bearer ${s}`}});n(t.data.campaigns)}}catch(t){if(console.log(t),t.response&&t.response.status===401)return navigate("/");o.NotificationManager.error("Failed to fetch campaigns","Error",5e3,()=>{alert(t.response.data.error)})}finally{r(!1)}})()},[s]),a.jsxs(a.Fragment,{children:[a.jsx(o.NotificationContainer,{}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:a.jsx(h,{})}),a.jsx("br",{})," ",a.jsx("br",{}),a.jsx("br",{})," ",e&&e.length>0&&a.jsx(j,{children:"Existing Campaigns"}),a.jsx("br",{}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:e&&e.length>0&&e.map((i,t)=>a.jsx(f,{title:i.title,url:i.thumbnail,link:i.link},t))})]})}function w(){const s=g();return l.useEffect(()=>{s(x({title:"Campaigns"}))},[]),a.jsx(N,{})}export{w as default};
